{"ast":null,"code":"import _slicedToArray from \"/Users/jeffreyquan/Projects/project2/tuesday-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jeffreyquan/Projects/project2/tuesday-client/src/components/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { HashRouter, Switch, Route, Redirect } from 'react-router-dom';\nimport Home from './Home';\nimport Dashboard from './Dashboard';\nimport axios from 'axios';\naxios.defaults.headers.common['Authorization'] = \"Bearer \".concat(localStorage.getItem('jwt'));\n\nfunction App(props) {\n  const _useState = useState('NOT_LOGGED_IN'),\n        _useState2 = _slicedToArray(_useState, 2),\n        loggedInStatus = _useState2[0],\n        setLoggedInStatus = _useState2[1];\n\n  const _useState3 = useState(localStorage.getItem('jwt')),\n        _useState4 = _slicedToArray(_useState3, 2),\n        jwt = _useState4[0],\n        setJwt = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        user = _useState6[0],\n        setUser = _useState6[1];\n\n  const handleLogin = data => {\n    setLoggedInStatus(\"LOGGED_IN\");\n    setJwt(localStorage.getItem(\"jwt\"));\n    setUser(data.user);\n  };\n\n  const handleLogout = () => {\n    setLoggedInStatus(\"NOT_LOGGED_IN\");\n    setJwt(\"\");\n    setUser(null);\n  };\n\n  useEffect(() => {\n    axios.get(\"https://tuesday-server.herokuapp.com/logged_in\", {\n      withCredentials: true\n    }).then(({\n      data\n    }) => {\n      if (data.logged_in && loggedInStatus === \"NOT_LOGGED_IN\") {\n        handleLogin(data);\n      } else {\n        handleLogout();\n      }\n    }).catch(error => {\n      console.log(\"check login error\", error);\n    });\n  }, []);\n  return React.createElement(HashRouter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, !jwt ? React.createElement(Redirect, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }) : null, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: props => React.createElement(Home, Object.assign({}, props, {\n      handleLogin: handleLogin,\n      loggedInStatus: loggedInStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/dashboard\",\n    render: props => React.createElement(Dashboard, Object.assign({}, props, {\n      user: user,\n      handleLogout: handleLogout,\n      loggedInStatus: loggedInStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jeffreyquan/Projects/project2/tuesday-client/src/components/App.js"],"names":["React","useState","useEffect","HashRouter","Switch","Route","Redirect","Home","Dashboard","axios","defaults","headers","common","localStorage","getItem","App","props","loggedInStatus","setLoggedInStatus","jwt","setJwt","user","setUser","handleLogin","data","handleLogout","get","withCredentials","then","logged_in","catch","error","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { HashRouter, Switch, Route, Redirect } from 'react-router-dom';\nimport Home from './Home'\nimport Dashboard from './Dashboard'\n\nimport axios from 'axios'\n\n\n\naxios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('jwt')}`;\n\nfunction App(props) {\n\n    const [loggedInStatus, setLoggedInStatus] = useState('NOT_LOGGED_IN');\n    const [jwt, setJwt] = useState(localStorage.getItem('jwt'));\n    const [user, setUser] = useState(null);\n\n\n    const handleLogin = (data) => {\n        setLoggedInStatus(\"LOGGED_IN\")\n        setJwt(localStorage.getItem(\"jwt\"))\n        setUser(data.user)\n    }\n\n\n    const handleLogout = () => {\n        setLoggedInStatus(\"NOT_LOGGED_IN\")\n        setJwt(\"\")\n        setUser(null)\n    }\n\n\n    useEffect(() => {\n        axios\n        .get(\"https://tuesday-server.herokuapp.com/logged_in\", { withCredentials: true })\n        .then(({ data }) => {\n            if (data.logged_in && loggedInStatus === \"NOT_LOGGED_IN\") {\n                handleLogin(data)\n            } else {\n                handleLogout()\n            }\n        })\n        .catch(error => {\n            console.log(\"check login error\", error);\n        });\n    }, [])\n\n    return (\n        <HashRouter>\n        {!jwt ? <Redirect to =\"/\" /> : null}\n        <Switch>\n        <Route exact path={\"/\"}\n        render={props => (\n            <Home {...props} handleLogin={handleLogin} loggedInStatus={loggedInStatus} />\n        )}\n        />\n        <Route exact path={\"/dashboard\"}\n        render={props => (\n            <Dashboard {...props} user={user}\n            handleLogout={handleLogout} loggedInStatus={loggedInStatus}/>\n        )}\n        />\n        </Switch>\n        </HashRouter>\n\n    )\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}