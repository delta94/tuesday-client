{"ast":null,"code":"import _defineProperty from \"/Users/jeffreyquan/Projects/project2/tuesday-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"/Users/jeffreyquan/Projects/project2/tuesday-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/jeffreyquan/Projects/project2/tuesday-client/src/components/Team.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n    padding: 1em;\\n    height:100vh;\\n    width: 30%;\\n    position: fixed;\\n    top: 0;\\n    right: 0;\\n    background-color: white;\\n    border: 1px solid lightgrey;\\n    z-index: 200;\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\nborder-radius: 25px;\\nwidth: 40px;\\nheight: 40px;\\nfont-weight: 700;\\nfont-size: 20px;\\nbackground-color: transparent;\\nborder: none;\\nmargin-left: 1em;\\nvertical-align: center;\\nitem-align: center;\\ntext-alignment: center;\\n\\n&:hover {\\n    background-color:#EDEEF0;\\n}\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport TemporaryDrawer from './partial/Drawer';\nimport ClearRoundedIcon from '@material-ui/icons/ClearRounded';\nimport { Button as ButtonUI, TextField, Input as InputUI, List, ListItem, ListItemText, ListItemAvatar, Avatar, Divider } from '@material-ui/core';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport FaceOutlinedIcon from '@material-ui/icons/FaceOutlined';\nimport SmsOutlinedIcon from '@material-ui/icons/SmsOutlined';\n\nclass Team extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: [],\n      members: null,\n      invitations: null\n    };\n    this.saveInvitation = this.saveInvitation.bind(this);\n\n    const fetchMemberships = () => {\n      axios.get(\"https://tuesday-server.herokuapp.com/projects/\".concat(props.projectId, \".json\")).then(results => {\n        console.log(results.data.memberships);\n        let emails = [];\n        let members = [];\n        let invitations = [];\n        results.data.memberships.map(m => {\n          if (m.invitation === true) {\n            members.push(m);\n            emails.push(m.email);\n          } else {\n            invitations.push(m);\n            emails.push(m.email);\n          }\n        });\n        console.log(members);\n        this.setState({\n          emails: emails,\n          members: members,\n          invitations: invitations\n        });\n        setTimeout(fetchMemberships, 10000);\n      });\n    };\n\n    fetchMemberships();\n  }\n\n  saveInvitation(content) {\n    axios.post(\"https://tuesday-server.herokuapp.com/memberships.json\", content).then(result => {\n      this.setState({\n        invitations: [...this.state.invitations, result.data]\n      });\n    });\n  }\n\n  render() {\n    if (this.state.members === null) {\n      return '';\n    }\n\n    return React.createElement(StyledTeam, {\n      className: \"members\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: {\n        margin: '0.3em 0 1em 0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Team Members\"), React.createElement(\"div\", {\n      style: {\n        overflow: 'scroll'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(InviteForm, {\n      emails: this.state.emails,\n      onSubmit: this.saveInvitation,\n      projectId: this.props.projectId,\n      style: {\n        margin: '0 0 1em 1em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(Display, {\n      style: {\n        height: '40vh',\n        overflow: 'scroll'\n      },\n      team: this.state.members,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Pending\"), React.createElement(Display, {\n      style: {\n        height: '40vh',\n        overflow: 'scroll'\n      },\n      team: this.state.invitations,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst IconContainer = styled.button(_templateObject());\nconst StyledTeam = styled.div(_templateObject2());\n\nfunction Display(props) {\n  return React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, props.team.map(m => {\n    return React.createElement(ListItem, {\n      button: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(ListItemAvatar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(FaceOutlinedIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(SmsOutlinedIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }))), React.createElement(ListItemText, {\n      primary: m.user.name,\n      secondary: m.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }));\n  }));\n}\n\nclass InviteForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validateForm = (form, formErrors, validateFunction) => {\n      const errorObj = {};\n      Object.keys(formErrors).map(x => {\n        const msg = validateFunction(form[x]);\n\n        if (msg) {\n          errorObj[x] = msg;\n        }\n      });\n      return errorObj;\n    };\n\n    this.validateEmail = value => {\n      let errorMessage = null;\n      let alreadyInvited = this.state.emails;\n\n      if (!value) {\n        errorMessage = \"Please enter email.\";\n      } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\n        errorMessage = \"Please enter valid email.\";\n      } else if (alreadyInvited.includes(value)) {\n        errorMessage = \"Already invited.\";\n      }\n\n      return errorMessage;\n    };\n\n    this.state = {\n      emails: this.props.emails,\n      form: {\n        email: '',\n        admin: false,\n        project_id: props.projectId,\n        invitation: false\n      },\n      formErrors: {\n        email: null\n      }\n    };\n    this._handleChange = this._handleChange.bind(this);\n    this._handleSubmit = this._handleSubmit.bind(this);\n    this.validateEmail = this.validateEmail.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n  }\n\n  _handleChange(event) {\n    const _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n    const _this$state = this.state,\n          form = _this$state.form,\n          formErrors = _this$state.formErrors;\n    let formObj = {};\n    formObj = _objectSpread({}, form, {\n      [name]: value\n    });\n    this.setState({\n      form: formObj\n    }, () => {\n      let formErrorsObj = {};\n      const errorMessage = this.validateEmail(value);\n      formErrorsObj = _objectSpread({}, formErrors, {\n        [name]: errorMessage\n      });\n      this.setState({\n        formErrors: formErrorsObj\n      });\n    });\n  }\n\n  _handleSubmit(event) {\n    event.preventDefault();\n    const _this$state2 = this.state,\n          emails = _this$state2.emails,\n          form = _this$state2.form,\n          formErrors = _this$state2.formErrors;\n    const errorObj = this.validateForm(form, formErrors, this.validateEmail);\n\n    if (Object.keys(errorObj) != 0) {\n      this.setState({\n        formErrors: _objectSpread({}, formErrors, {}, errorObj)\n      });\n      console.log(errorObj);\n      return false;\n    } else {\n      this.props.onSubmit(form);\n      this.setState({\n        emails: [...emails, form.email],\n        form: {\n          email: '',\n          admin: false,\n          project_id: this.props.projectId,\n          invitation: false\n        },\n        formErrors: {\n          email: null\n        }\n      });\n    }\n  }\n\n  render() {\n    const _this$state3 = this.state,\n          form = _this$state3.form,\n          formErrors = _this$state3.formErrors;\n    return React.createElement(\"form\", {\n      onSubmit: this._handleSubmit,\n      style: {\n        display: 'flex',\n        itemAlign: 'center',\n        padding: '5px 0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(StyledTextField, {\n      id: \"outlined-basic\",\n      label: \"Find user by email\",\n      variant: \"outlined\",\n      type: \"text\",\n      name: \"email\",\n      required: true,\n      onChange: this._handleChange,\n      value: form.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(StyledButtonUI, {\n      type: \"submit\",\n      name: \"Invite\",\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Invite\"), React.createElement(\"div\", {\n      className: \"errors\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, formErrors.email));\n  }\n\n}\n\nconst StyledButtonUI = withStyles({\n  root: {\n    background: 'linear-gradient(90deg, #3EB2F9 10%, #009AFF 90%)',\n    borderRadius: 25,\n    height: 50,\n    border: 0,\n    color: 'white',\n    padding: '5px 2em',\n    boxShadow: '0 0 1px rgba(255, 105, 135, .3)',\n    margin: '4px 1em'\n  },\n  label: {\n    textTransform: 'capitalize',\n    fontWeight: 800\n  }\n})(ButtonUI);\nconst StyledTextField = withStyles({\n  root: {\n    '& input:valid + fieldset': {\n      borderColor: 'lightgrey',\n      borderWidth: 1,\n      borderRadius: 25\n    },\n    '& input:valid:focus + fieldset': {\n      borderColor: 'lightgrey',\n      borderLeftWidth: 6,\n      borderRadius: 25\n    }\n  },\n  label: {\n    fontWeight: 800,\n    color: 'lightgrey'\n  }\n})(TextField);\nexport default Team;","map":{"version":3,"sources":["/Users/jeffreyquan/Projects/project2/tuesday-client/src/components/Team.js"],"names":["React","Component","axios","styled","TemporaryDrawer","ClearRoundedIcon","Button","ButtonUI","TextField","Input","InputUI","List","ListItem","ListItemText","ListItemAvatar","Avatar","Divider","makeStyles","withStyles","FaceOutlinedIcon","SmsOutlinedIcon","Team","constructor","props","state","emails","members","invitations","saveInvitation","bind","fetchMemberships","get","projectId","then","results","console","log","data","memberships","map","m","invitation","push","email","setState","setTimeout","content","post","result","render","margin","overflow","height","IconContainer","button","StyledTeam","div","Display","team","user","name","InviteForm","validateForm","form","formErrors","validateFunction","errorObj","Object","keys","x","msg","validateEmail","value","errorMessage","alreadyInvited","test","includes","admin","project_id","_handleChange","_handleSubmit","event","target","formObj","formErrorsObj","preventDefault","onSubmit","display","itemAlign","padding","StyledButtonUI","root","background","borderRadius","border","color","boxShadow","label","textTransform","fontWeight","StyledTextField","borderColor","borderWidth","borderLeftWidth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport TemporaryDrawer from './partial/Drawer'\n\nimport ClearRoundedIcon from '@material-ui/icons/ClearRounded';\nimport {Button as ButtonUI, TextField, Input as InputUI, List, ListItem, ListItemText, ListItemAvatar, Avatar, Divider } from '@material-ui/core';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport FaceOutlinedIcon from '@material-ui/icons/FaceOutlined';\nimport SmsOutlinedIcon from '@material-ui/icons/SmsOutlined';\n\nclass Team extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: [],\n      members: null,\n      invitations: null,\n    };\n\n    this.saveInvitation = this.saveInvitation.bind(this);\n\n    const fetchMemberships = () => {\n      axios.get(`https://tuesday-server.herokuapp.com/projects/${ props.projectId }.json`).then((results) => {\n        console.log(results.data.memberships);\n        let emails = [];\n        let members = [];\n        let invitations = [];\n        results.data.memberships.map( (m) => {\n          if (m.invitation === true) {\n            members.push(m);\n            emails.push(m.email);\n          } else {\n            invitations.push(m);\n            emails.push(m.email);\n          }\n        })\n        console.log( members );\n        this.setState({\n          emails: emails,\n          members: members,\n          invitations: invitations\n        })\n        setTimeout( fetchMemberships, 10000);\n      });\n    }\n    fetchMemberships();\n  }\n\n  saveInvitation(content) {\n    axios.post(`https://tuesday-server.herokuapp.com/memberships.json`, content).then((result) => {\n      this.setState({invitations: [...this.state.invitations, result.data ]})\n    })\n  }\n\n  render() {\n    if ( this.state.members === null ) {\n      return ''\n    }\n    return (\n\n      <StyledTeam className=\"members\">\n        <h2 style={{margin: '0.3em 0 1em 0'}}>Team Members</h2>\n        <div style={{overflow: 'scroll'}}>\n        <InviteForm emails={ this.state.emails } onSubmit={ this.saveInvitation } projectId={ this.props.projectId } style={{margin: '0 0 1em 1em'}}/>\n          <Display style={{height: '40vh', overflow: 'scroll'}} team={ this.state.members } />\n          <h4>Pending</h4>\n          <Display style={{height: '40vh', overflow: 'scroll'}} team={ this.state.invitations } />\n          </div>\n      </StyledTeam>\n    )\n  }\n}\n\n\nconst IconContainer = styled.button`\nborder-radius: 25px;\nwidth: 40px;\nheight: 40px;\nfont-weight: 700;\nfont-size: 20px;\nbackground-color: transparent;\nborder: none;\nmargin-left: 1em;\nvertical-align: center;\nitem-align: center;\ntext-alignment: center;\n\n&:hover {\n    background-color:#EDEEF0;\n}\n`;\n\n\nconst StyledTeam = styled.div`\n    padding: 1em;\n    height:100vh;\n    width: 30%;\n    position: fixed;\n    top: 0;\n    right: 0;\n    background-color: white;\n    border: 1px solid lightgrey;\n    z-index: 200;\n`;\n\nfunction Display(props) {\n  return (\n    <List>\n      {props.team.map( (m) => {\n        return(\n            <ListItem button>\n              <ListItemAvatar>\n                <Avatar>\n                  <FaceOutlinedIcon />\n                  <SmsOutlinedIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText primary={m.user.name} secondary={m.email} />\n            </ListItem>\n        )\n      })}\n    </List>\n  )\n}\n\nclass InviteForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: this.props.emails,\n      form: {\n        email: '',\n        admin: false,\n        project_id: props.projectId,\n        invitation: false,\n      },\n      formErrors: {\n        email: null,\n      }\n    }\n    this._handleChange = this._handleChange.bind(this);\n    this._handleSubmit = this._handleSubmit.bind(this);\n    this.validateEmail = this.validateEmail.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n  }\n\n  _handleChange(event) {\n    const { name, value } = event.target;\n    const { form, formErrors } = this.state;\n    let formObj = {};\n    formObj = { ...form, [name]:value };\n    this.setState({ form: formObj }, () => {\n      let formErrorsObj = {};\n      const errorMessage = this.validateEmail(value);\n      formErrorsObj = {...formErrors, [name]: errorMessage };\n      this.setState({ formErrors: formErrorsObj });\n    });\n  }\n\n  _handleSubmit(event) {\n    event.preventDefault();\n    const { emails, form, formErrors } = this.state;\n    const errorObj = this.validateForm(form, formErrors, this.validateEmail);\n    if ( Object.keys(errorObj) != 0 ) {\n      this.setState({ formErrors: { ...formErrors, ...errorObj } });\n      console.log(errorObj);\n      return false;\n    } else {\n      this.props.onSubmit(form);\n      this.setState({\n        emails: [...emails, form.email],\n        form: {\n          email: '',\n          admin: false,\n          project_id: this.props.projectId,\n          invitation: false,\n        },\n        formErrors: {\n          email: null,\n        }\n      })\n    }\n  }\n\n  validateForm = (form, formErrors, validateFunction) => {\n    const errorObj = {};\n    Object.keys(formErrors).map(x => {\n      const msg = validateFunction(form[x]);\n      if (msg) {\n        errorObj[x] = msg;\n      }\n    });\n    return errorObj;\n  }\n\n  validateEmail = (value) => {\n    let errorMessage = null;\n    let alreadyInvited = this.state.emails;\n    if (!value) {\n      errorMessage = \"Please enter email.\";\n    }  else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\n      errorMessage = \"Please enter valid email.\";\n    } else if (alreadyInvited.includes(value)) {\n      errorMessage = \"Already invited.\"\n    }\n    return errorMessage;\n  };\n\n  render() {\n    const { form, formErrors } = this.state;\n    return (\n\n        <form onSubmit={ this._handleSubmit } style={{display:'flex', itemAlign:'center', padding:'5px 0'}}>\n          <StyledTextField\n          id=\"outlined-basic\" label=\"Find user by email\" variant=\"outlined\"\n            type=\"text\"\n            name=\"email\"\n            required\n            onChange={ this._handleChange }\n            value={ form.email }\n          />\n          <StyledButtonUI type=\"submit\" name=\"Invite\" color=\"primary\">Invite</StyledButtonUI>\n          <div className=\"errors\">{ formErrors.email }</div>\n        </form>\n    )\n  }\n}\n\n\nconst StyledButtonUI = withStyles({\n    root: {\n        background: 'linear-gradient(90deg, #3EB2F9 10%, #009AFF 90%)',\n        borderRadius: 25,\n        height:50,\n        border: 0,\n        color: 'white',\n        padding: '5px 2em',\n        boxShadow: '0 0 1px rgba(255, 105, 135, .3)',\n        margin: '4px 1em',\n    },\n    label: {\n        textTransform: 'capitalize',\n        fontWeight: 800\n    },\n})(ButtonUI);\n\nconst StyledTextField = withStyles({\n    root: {\n\n        '& input:valid + fieldset': {\n            borderColor: 'lightgrey',\n            borderWidth: 1,\n            borderRadius: 25,\n        },\n        '& input:valid:focus + fieldset': {\n            borderColor: 'lightgrey',\n            borderLeftWidth: 6,\n            borderRadius: 25,\n        },\n    },\n    label: {\n        fontWeight: 800,\n        color: 'lightgrey',\n    },\n})(TextField);\n\n\nexport default Team;\n"]},"metadata":{},"sourceType":"module"}